# Generated by Codex on 2026-02-12

from django.db import migrations


def seed_evolucao_category(apps, schema_editor):
    CategoriaEmocional = apps.get_model("brain", "CategoriaEmocional")
    GatilhoEmocional = apps.get_model("brain", "GatilhoEmocional")
    RespostaEmocional = apps.get_model("brain", "RespostaEmocional")

    categoria_evolucao, _created = CategoriaEmocional.objects.update_or_create(
        slug="evolucao",
        defaults={"nome": "Evolu√ß√£o", "emoji": "üìà", "ativo": True},
    )

    gatilhos = [
        "estou melhor",
        "evolui",
        "evolu√≠",
        "melhorei",
        "to indo bem",
        "t√¥ indo bem",
        "deu certo",
        "consegui",
        "bati a meta",
        "terminei",
        "orgulhoso",
        "orgulhosa",
    ]
    for palavras_chave in gatilhos:
        GatilhoEmocional.objects.update_or_create(
            categoria=categoria_evolucao,
            palavras_chave=palavras_chave,
            defaults={"ativo": True},
        )

    respostas = [
        "Que boa not√≠cia. Quer me dizer o que voc√™ fez que ajudou a melhorar?",
        "Parab√©ns! Qual foi a parte mais dif√≠cil que voc√™ superou?",
        "Isso √© progresso real. Quer definir a pr√≥xima meta pequena para manter o ritmo?",
        "Muito bom. Quer registrar essa vit√≥ria para lembrar nos dias dif√≠ceis?",
    ]
    for texto in respostas:
        RespostaEmocional.objects.update_or_create(
            categoria=categoria_evolucao,
            texto=texto,
            defaults={"ativo": True},
        )


def unseed_evolucao_category(apps, schema_editor):
    CategoriaEmocional = apps.get_model("brain", "CategoriaEmocional")
    CategoriaEmocional.objects.filter(slug="evolucao").delete()


class Migration(migrations.Migration):
    dependencies = [
        ("brain", "0004_expand_respostas_categorias"),
    ]

    operations = [
        migrations.RunPython(seed_evolucao_category, unseed_evolucao_category),
    ]
